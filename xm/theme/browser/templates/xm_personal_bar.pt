<div id="portal-personaltools-wrapper"
     i18n:domain="plone">

<h5 class="hiddenStructure" i18n:translate="heading_personal_tools">Personal tools</h5>

<ul id="portal-personaltools"
    class="visualInline">
   <tal:block condition="not: view/anonymous">
       <li><a
           id="user-name"
           tal:attributes="href view/homelink_url"
          ><img src="" tal:replace="structure here/user.gif" />
            <span class="visualCaseSensitive"
                 tal:content="view/user_name">
                John
           </span
       ></a></li>
       <li>
         <dl id="my-projects-menu" class="actionMenu deactivated"
             tal:condition="view/has_projects">
             <dt class="actionMenuHeader label-my-projects">
               <a id="" href="#">
                 <span i18n:domain="xm.theme"
                       i18n:translate="label_my_projects">My Projects</span>
                 <span class="arrowDownAlternative">&#9660;</span><a/>
            </dt>
             <dd class="actionMenuContent project-submenu">
               <ul>
                 <tal:actions repeat="project view/my_projects">
                 <li>
                   <a href=""
                       tal:attributes="href project/url;
                                       title project/description"
                       tal:content="project/title">
                   </a>
                 </li>
                 </tal:actions>
               </ul>
             </dd>
         </dl>
      </li>
    </tal:block>
    <tal:actions tal:repeat="action view/user_actions">
        <li tal:define="icon python:view.getIconFor(action['category'], action['id'], None);
                        class_name string:visualIcon actionicon-${action/category}-${action/id};
                        class_name python:icon is not None and class_name or nothing;"
            tal:attributes="class class_name">
            <a href=""
               tal:attributes="href action/url;
                               class python:icon is not None and 'visualIconPadding' or nothing;"
            ><tal:actionname i18n:translate=""
                             tal:content="action/title">dummy</tal:actionname
            ></a>
        </li>
    </tal:actions>

</ul>
</div>
